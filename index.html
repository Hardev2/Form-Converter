<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Online Form Converter</title>
<link rel="icon" type="image/svg+xml" href="favicon.svg" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script>if (typeof pdfjsLib !== 'undefined') { pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js'; }</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
<link rel="stylesheet" href="form_converter.css">
</head>

<body>

<div class="converter">
  <header class="header">
    <div class="header-brand">
      <div class="header-logo" aria-hidden="true">
        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="40" height="40" rx="10" fill="var(--surface-elevated)"/>
          <path d="M10 14h20v2H10V14zm0 6h14v2H10v-2zm0 6h18v2H10v-2z" fill="var(--text-muted)"/>
          <path d="M26 22l6 4-6 4v-3h-4v-2h4v-3z" fill="var(--accent)"/>
        </svg>
      </div>
      <div class="header-titles">
        <h1>Form Converter</h1>
        <p>Generate PHP form markup for text, radio, checkbox, and select fields.</p>
      </div>
    </div>
  </header>

  <section class="card form-reference-card">
    <h2 class="card-title">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M16 13H8"/><path d="M16 17H8"/><path d="M10 9H8"/></svg>
      Form reference (optional)
    </h2>
    <p class="hint-block">Upload a PDF or DOCX to <strong>detect fields and convert to form markup</strong> (Version 1 is generated automatically). Or paste text and click Parse. <strong>Fields:</strong> <strong>Full Name - [Text field]</strong>, <strong>Email - [Email field]</strong>, <strong>Label - [Radio Buttons]</strong> / <strong>[Checkbox]</strong> / <strong>[Select]</strong> / <strong>[Date Picker]</strong> / <strong>[Time Picker]</strong>, <strong>[Amount]</strong>, <strong>[Age]</strong>, <strong>[Number only]</strong>, <strong>[Upload]</strong>, <strong>[Header]</strong>. <strong>Radio/checkbox/select options</strong> (preferred): one per line with bullet <strong>●</strong>. Alternative: <strong>Options:</strong> then one option per line, or <strong>Options: (Option A&#10;Option B&#10;Other)</strong>.</p>
    <div class="form-group">
      <label>Paste text or upload file</label>
      <textarea id="formReferenceText" rows="4" placeholder="Type here (example: Full Name - [Text field]&#10;Email Address - [Email field]&#10;Sport - [Radio Buttons])"></textarea>
    </div>
    <div class="form-reference-actions">
      <label class="btn btn-primary upload-file-label">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        Upload file & convert
        <input type="file" id="formReferenceFile" accept=".pdf,.docx" onchange="handleFormReferenceFile(event)" class="upload-file-input" />
      </label>
      <button type="button" class="btn btn-secondary" onclick="parseFormReferenceFromInput()">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polygon points="5 3 19 12 5 21 5 3"/></svg>
        Parse reference
      </button>
      <button type="button" class="btn btn-secondary" onclick="clearFormReference()">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        Clear & use manual
      </button>
      <button type="button" class="btn btn-ghost btn-guide" onclick="openFileGuideModal()" title="See expected file format">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/><path d="M8 7h8"/><path d="M8 11h8"/></svg>
        File format guide
      </button>
    </div>
    <div id="parsedPreview" class="parsed-preview empty"></div>
  </section>

  <div class="layout">
    <section class="card">
      <h2 class="card-title">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
        Configuration
      </h2>

      <div class="form-group">
        <label>Field type</label>
        <select id="fieldType" onchange="toggleRadioOptions()">
          <option value="text">Text</option>
          <option value="textarea">Textarea</option>
          <option value="radio">Radio</option>
          <option value="checkbox">Checkbox</option>
          <option value="select">Select</option>
          <option value="amount">Amount</option>
          <option value="age">Age</option>
          <option value="numberOnly">Number only</option>
          <option value="upload">Upload</option>
          <option value="header">Header</option>
        </select>
      </div>

      <div class="form-group">
        <label>Field name(s) <span class="hint">— one per line</span></label>
        <textarea id="fieldNames" rows="4" placeholder="Field 1&#10;Field 2&#10;Field 3"></textarea>
      </div>

      <div id="radioOptionsBox" class="form-group">
        <label>Options <span class="hint">— one per line (newline = new option; spaces on a line = one option)</span></label>
        <textarea id="radioOptions" rows="4" placeholder="Option 1&#10;Option 2&#10;Option 3"></textarea>
      </div>

      <div class="actions">
        <button type="button" class="btn btn-primary" onclick="generate('v1')">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/><path d="M9 14h6"/><path d="M9 18h6"/></svg>
          Generate Version 1
        </button>
        <button type="button" class="btn btn-secondary" onclick="generate('v2')">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3z"/></svg>
          Generate Modern
        </button>
      </div>
    </section>

    <section class="card">
      <h2 class="card-title">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
        Output
      </h2>
      <div class="output-wrap">
        <div class="output-header">
          <span class="hint">PHP markup</span>
          <div class="output-actions">
            <button type="button" id="mergeBtn" class="btn-copy" onclick="openMergeModal()" title="Merge selected fields">
              <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
              Merge
            </button>
            <button type="button" id="undoMergeBtn" class="btn-copy" onclick="undoMerge()" title="Undo last merge">
              <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></svg>
              Undo Merge
            </button>
            <button type="button" id="requiredBtn" class="btn-copy" onclick="markSelectionRequired()" title="Mark selected field(s) as required">
              <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              Required
            </button>
            <button type="button" id="copyBtn" class="btn-copy" onclick="copyOutput()" title="Copy to clipboard">
              <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
              Copy
            </button>
          </div>
        </div>
        <textarea id="output" rows="22" placeholder="Click “Generate Version 1” or “Generate Modern” to see the PHP markup here."></textarea>
        <div class="output-footer">
          <button type="button" class="btn-copy" onclick="clearOutput()" title="Clear output">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
            Clear
          </button>
        </div>
      </div>
    </section>
  </div>
</div>

<div id="fileGuideModal" class="guide-modal-overlay" aria-hidden="true" onclick="if (event.target === this) closeFileGuideModal()">
  <div class="guide-modal" onclick="event.stopPropagation()">
    <div class="guide-modal-header">
      <h3>File format guide</h3>
      <button type="button" class="guide-modal-close" onclick="closeFileGuideModal()" aria-label="Close">×</button>
    </div>
    <div class="guide-modal-body">
      <p class="guide-intro">Upload a <strong>PDF</strong> or <strong>DOCX</strong> that describes your form. The converter extracts text and looks for field labels and types in these formats.</p>

      <h4>Accepted files</h4>
      <ul>
        <li><strong>.pdf</strong> — text is extracted for parsing</li>
        <li><strong>.docx</strong> — document body text is extracted</li>
      </ul>

      <h4>Field format (preferred)</h4>
      <p>Use a dash before the type in square brackets. Space before the dash is optional. If you use <strong>[Text field]</strong>, the converter may infer <strong>Amount</strong>, <strong>Age</strong>, <strong>Number only</strong>, or <strong>Upload</strong> from the label (e.g. <code>Age - [Text field]</code> → age, <code>Monthly Salary - [Text field]</code> → amount, <code>Quantity - [Text field]</code> → number only, <code>Attach Resume - [Text field]</code> → upload).</p>
      <pre>Full Name - [Text field]
Email Address - [Email field]
Phone - [Text field]
Sport - [Radio Buttons]
Subject - [Select]
Birth Date - [Date Picker]
Start Time - [Time Picker]
Newsletter - [Checkbox]
Monthly Salary - [Amount]
Age - [Age]
Quantity - [Number only]
Attach Resume - [Upload]</pre>

      <h4>Radio & checkbox options</h4>
      <p>List options after the field line. Best: one option per line with a bullet <strong>●</strong> or <strong>•</strong>.</p>
      <pre>Sport - [Radio Buttons]
● Soccer
● Basketball
● Volleyball
● Other</pre>
      <p>Alternatives:</p>
      <ul>
        <li><strong>Options:</strong> then one option per line</li>
        <li><strong>Options: (Option A<br>Option B<br>Other)</strong></li>
      </ul>

      <h4>Supported field types</h4>
      <ul>
        <li><code>[Text field]</code></li>
        <li><code>[Email field]</code></li>
        <li><code>[Radio Buttons]</code></li>
        <li><code>[Checkbox]</code></li>
        <li><code>[Select]</code></li>
        <li><code>[Date Picker]</code></li>
        <li><code>[Time Picker]</code></li>
        <li><code>[Amount]</code> — currency/numeric amount</li>
        <li><code>[Age]</code> — age input</li>
        <li><code>[Number only]</code> — numbers only</li>
        <li><code>[Upload]</code> — file upload (e.g. .doc, .docx, .pdf | Max: 10MB)</li>
        <li><code>[Header]</code> — section header (no input, only label + hidden marker)</li>
      </ul>
    </div>
    <div class="guide-modal-actions">
      <button type="button" class="btn btn-primary" onclick="closeFileGuideModal()">Got it</button>
    </div>
  </div>
</div>

<div id="mergeModal" class="merge-modal-overlay" aria-hidden="true">
  <div class="merge-modal">
    <h3>Merge fields</h3>
    <p>Selected <strong id="mergeBlockCount">0</strong> field(s). Merge into:</p>
    <div class="merge-modal-choices">
      <button type="button" data-cols="2">2 columns</button>
      <button type="button" data-cols="3">3 columns</button>
    </div>
    <div class="merge-modal-actions">
      <button type="button" class="btn btn-secondary" onclick="closeMergeModal()">Cancel</button>
      <button type="button" class="btn btn-primary" id="mergeConfirmBtn" onclick="applyMerge()">Merge</button>
    </div>
  </div>
</div>

<script src="form_converter.js"></script>
    

</body>
</html>
